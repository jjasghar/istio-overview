<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>Istio Overview</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>

  

  <link rel="stylesheet" type="text/css" href=".//css/highlight/default.css"  />
  <link rel="stylesheet" type="text/css" href=".//css/mermaid-6.0.0.css" />
  <link rel="stylesheet" type="text/css" href=".//css/font-awesome-4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href=".//css/introjs-2.5.local.css">
  <link rel="stylesheet" type="text/css" href=".//css/jquery-ui-1.12.1.css">
  <link rel="stylesheet" type="text/css" href=".//css/showoff.css?v=0.19.6" />
  <link rel="stylesheet" type="text/css" href=".//css/zoomline-0.0.1.css">

  <script type="text/javascript" src=".//js/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src=".//js/jquery-ui-1.12.1.js"></script>

  <script type="text/javascript" src=".//js/jquery.cycle.all-2.8.0.js"></script>
  <script type="text/javascript" src=".//js/jquery.batchImageLoad-1.0.0.js"></script>
  <script type="text/javascript" src=".//js/jquery.parsequery.min-6a20f83.js"></script>
  <script type="text/javascript" src=".//js/jquery.doubletap-4ff02c5.js"></script>
  <script type="text/javascript" src=".//js/highlight.pack-9.2.0.js"></script>
  <script type="text/javascript" src=".//js/jTypeWriter-1.1.js"></script>
  <script type="text/javascript" src=".//js/bigtext-0.1.8.js"></script>
  <script type="text/javascript" src=".//js/zoomline-0.0.1.js"></script>
  <script type="text/javascript" src=".//js/simpleStrings-0.0.1.js"></script>
  <script type="text/javascript" src=".//js/mermaid-6.0.0-min.js"></script>

  <!-- waiting on https://github.com/usablica/intro.js/pull/727 -->
  <script type="text/javascript" src=".//js/intro-2.5.local.js"></script>

  <script type="text/javascript" src=".//js/coffee-script-1.1.3-pre.js"></script>

  <script type="text/javascript" src=".//js/annotations.js?v=0.19.6"></script>
  <script type="text/javascript" src=".//js/showoff.js?v=0.19.6"></script>

  
    <link rel="stylesheet" href=".//file/styles.css" type="text/css"/>
  

  

  <script type="text/javascript">
    $(function(){
      setupPreso(false, './');
    });

    editUrl     = "";
    interactive = false;
    master      = false;
    presenter   = false;

    keymap               = {
  "d": "DEBUG",
  "space": "NEXT",
  "down": "NEXT",
  "right": "NEXT",
  "pagedown": "NEXT",
  "up": "PREV",
  "left": "PREV",
  "pageup": "PREV",
  "SPACE": "NEXTSEC",
  "DOWN": "NEXTSEC",
  "RIGHT": "NEXTSEC",
  "PAGEDOWN": "NEXTSEC",
  "UP": "PREVSEC",
  "LEFT": "PREVSEC",
  "PAGEUP": "PREVSEC",
  "R": "RELOAD",
  "r": "REFRESH",
  "c": "CONTENTS",
  "t": "CONTENTS",
  "h": "HELP",
  "/": "HELP",
  "?": "HELP",
  "b": "BLANK",
  ".": "BLANK",
  "F": "FOOTER",
  "f": "FOLLOW",
  "n": "NOTES",
  "esc": "CLEAR",
  "p": "PAUSE",
  "P": "PRESHOW",
  "x": "EXECUTE",
  "f5": "EXECUTE"
};
    keycode_dictionary   = {
  "0": "\\",
  "8": "backspace",
  "9": "tab",
  "12": "num",
  "13": "enter",
  "16": "shift",
  "17": "ctrl",
  "18": "alt",
  "19": "pause",
  "20": "caps",
  "27": "esc",
  "32": "space",
  "33": "pageup",
  "34": "pagedown",
  "35": "end",
  "36": "home",
  "37": "left",
  "38": "up",
  "39": "right",
  "40": "down",
  "44": "print",
  "45": "insert",
  "46": "delete",
  "48": "0",
  "49": "1",
  "50": "2",
  "51": "3",
  "52": "4",
  "53": "5",
  "54": "6",
  "55": "7",
  "56": "8",
  "57": "9",
  "59": ";",
  "61": "=",
  "65": "a",
  "66": "b",
  "67": "c",
  "68": "d",
  "69": "e",
  "70": "f",
  "71": "g",
  "72": "h",
  "73": "i",
  "74": "j",
  "75": "k",
  "76": "l",
  "77": "m",
  "78": "n",
  "79": "o",
  "80": "p",
  "81": "q",
  "82": "r",
  "83": "s",
  "84": "t",
  "85": "u",
  "86": "v",
  "87": "w",
  "88": "x",
  "89": "y",
  "90": "z",
  "91": "cmd",
  "92": "cmd",
  "93": "cmd",
  "96": "num_0",
  "97": "num_1",
  "98": "num_2",
  "99": "num_3",
  "100": "num_4",
  "101": "num_5",
  "102": "num_6",
  "103": "num_7",
  "104": "num_8",
  "105": "num_9",
  "106": "num_multiply",
  "107": "num_add",
  "108": "num_enter",
  "109": "num_subtract",
  "110": "num_decimal",
  "111": "num_divide",
  "112": "f1",
  "113": "f2",
  "114": "f3",
  "115": "f4",
  "116": "f5",
  "117": "f6",
  "118": "f7",
  "119": "f8",
  "120": "f9",
  "121": "f10",
  "122": "f11",
  "123": "f12",
  "124": "print",
  "144": "num",
  "145": "scroll",
  "173": "-",
  "186": ";",
  "187": "=",
  "188": ",",
  "189": "-",
  "190": ".",
  "191": "/",
  "192": "`",
  "219": "[",
  "220": "\\",
  "221": "]",
  "222": "'",
  "223": "`",
  "224": "cmd",
  "225": "alt",
  "57392": "ctrl",
  "63289": "num"
};
    keycode_shifted_keys = {
  "0": ")",
  "1": "!",
  "2": "@",
  "3": "#",
  "4": "$",
  "5": "%",
  "6": "^",
  "7": "&",
  "8": "*",
  "9": "(",
  "/": "?",
  ".": ">",
  ",": "<",
  "'": "\"",
  ";": ":",
  "[": "{",
  "]": "}",
  "\\": "|",
  "`": "~",
  "=": "+",
  "-": "_",
  "space": "SPACE",
  "down": "DOWN",
  "right": "RIGHT",
  "pagedown": "PAGEDOWN",
  "up": "UP",
  "left": "LEFT",
  "pageup": "PAGEUP"
};
    user_translations    = {
};

    I18n = new translation({"name":"Showoff Presentation","menu":{"title":"Showoff Menu","table_of_contents":"Table of Contents","downloads":"Downloads","feedback":{"label":"Send Feedback","description":"This slide is...","worst":"Terrible","best":"Awesome","why":"Why...?","send":"Send"},"pace":{"label":"The presenter should...","slower":"Slow Down","faster":"Speed Up"},"question":{"label":"Ask a Question","placeholder":"Ask a question..."},"edit":"Edit Current Slide","clear_annotations":"Clear Annotations","language":"Content Language","close":"Close","help":"Press <code>?</code> for help.","anonymous":"All features are anonymous.","sending":"Sending..."},"navigation":{"next":"Next","previous":"Previous","sync":"Sync Presentation"},"loading":"loading presentation...","activity_complete":"Activity complete","follow":{"label":"Follow Mode:"},"refresh":"Are you sure you want to refresh the slide content?\n\n(Use `RELOAD` to fully reload the entire UI)","reload":"Are you sure you want to reload Showoff?","preshow":{"prompt":"Minutes from now to start?","resume":"Resuming in:"},"tour":{"show":"See the Tour","reset":"Reset Hints","welcome":"<h3>Welcome to Showoff</h3>Let me show you around. After you finish this tour, it won't show again.","displayview":"Start by clicking this button to open the Display Window; then drag it onto the projector.","annotations":"Draw on your slides everywhere the presentation is displayed.","timer":"Set a countdown timer to help you stay on pace.","pace":"Audience members can use this to tell you if you're moving too quickly. Try to keep the indicator centered.","questions":"Questions asked by audience members are displayed here. You'll also see a count indicator on the Display Window when you have questions to answer.","notes":"Configure the notes display by zooming text, resizing the pane, or even popping it out into a new window.","slidesource":"The name of the slide is displayed here.","settings":"Would you like a different presenter layout? Choose that and other settings here.","edit":"This button will open your web-based editor--usually something like GitHub.","report":"Don't forget to report issues when you see them.","activity":{"count":"This will count down as audience members mark their activity complete. Their presentations will pause until completed.","complete":"Check this box when you're ready to move on. The presentation will pause while you're working."},"form":{"responses":"As questions are answered, they'll show up as a bar chart with the number of answers to each question on the right.","display":"Press this button to present a snapshot of the live responses on slide.","save":"Press this button to save your responses. The presentation will pause while answering."},"menu":{"start":"Click here to open the menu.","navigation":"Quickly navigate to any slide.","download":"Download presentation support files.","pace":"Provide pace feedback.","questions":"Ask live questions of the presenter.","feedback":"Provide suggestions for improving the content."}},"downloads":{"title":"File Downloads"},"help":{"title":"Help","next":"Move to the next slide.","prev":"Move to the previous slide.","nextsec":"Move to the next section.","prevsec":"Move to the previous section.","contents":"Show the table of contents menu.","follow":"Toggle follow mode.","help":"Show this help dialog.","refresh":"Refresh slide content.","reload":"Completely reload Showoff.","blank":"Blank the screen.","footer":"Toggle the display footer.","notes":"Toggle notes display.","clear":"Clear code execution results.","pause":"Pause the presentation.","preshow":"Display slideshow of <tt>preshow</tt> images on a timer.","execute":"Execute the first visible code block.","debug":"Show debugging information.","close":"Close"},"stats":{"title":"Viewing Statistics","stray":"of your audience is not viewing the same slide you are.","idle":"of your audience is idle.","current":"Slides currently being viewed","elapsed":"Elapsed time spent on each slide","nodata":"No data to display.","allcurrent":"All audience members are viewing the presenter's slide."},"forms":{"display":"Display Results","save":"Save"},"presenter":{"topbar":{"annotations":"Annotations","edit":"Edit Slide","report":"Report Issue With Slide","stats":"Viewing Statistics","downloads":"Downloads","display":"Display Window","print":"Print Slides","settings":"Settings","newpage":"Open in a new page...","tooltip":{"annotations":"Enable the annotations subsystem.","edit":"Edit current slide in new window.","report":"Report an issue with the current slide.","stats":"See the slides your audience is interacting with.","downloads":"Open the file downloads in a menu or new page.","display":"Enable the Display Window; you should put this on the projector.","print":"Print slides using a new window.","settings":"Open the Settings dialog."}},"preview":{"next":"Next","previous":"Previous"},"mobile":{"update":"Update"},"notes":{"label":"Showoff Notes","personal":"Personal Notes"},"timer":{"label":"Timer:","start":"Start","pause":"Pause","resume":"Resume","cancel":"Cancel","unit":"minutes"},"pace":{"faster":"Speed Up!","slower":"Slow Down!"},"questions":"Audience Questions","annotation":{"tools":"Tools","lines":"Lines","shapes":"Shapes"},"status":{"label":"Slides:"},"settings":{"label":"Settings","close":"Close","follower":{"label":"Update Follower","tooltip":"Send slide change notifications.","description":"When this is enabled, the Showoff server will track your slide changes. Disable it to observe the presentation without inadvertently causing slide changes."},"remote":{"label":"Enable Remote","tooltip":"Enables tracking of other presenters.","description":"When this is enabled, you can load the presenter in another browser (typically on your mobile phone) to control the presentation."},"layout":{"label":"Layout","default":"Default Layout","thumbs":"Display thumbnail previews of the next and previous slides.","beside":"Display the next slide as a large preview in the main presenter view.","floating":"Open the next slide as a floating window.","confirmation":"Browser security requires confirmation before opening a new window.","open":"Open Window","cancel":"cancel","reset":{"label":"Clear Showoff settings.","tooltip":"Reset Showoff UI settings to default values."}},"language":{"label":"Content Language","tooltip":"Select from available translations, or autoselect based on your browser settings.","description":"This presentation is available in different languages. Choose the language you would like to view or leave it at <tt>automatic</tt> to use your browser settings."}},"print":{"label":"Choose type of printed notes","description":"Select the content you'd like to show under the slides.","none":"Don't include notes","notes":"Presenter Notes","handouts":"Audience Handouts"}},"language":{"auto":"Automatic","disable":"Disable Translations"},"error":{"file_not_found":"File Not Found!"}});

  </script>

</head>

<body>
<div id="questionsIndicator"></div>

<i id="hamburger" class="fa fa-bars fa-2x"></i>
<div id="sidebarWrapper">
    <div id="navigationHover"></div>
    <div id="feedbackSidebar" class="sideMenu">
    <img id="disconnected" src=".//css/disconnected.png">
    <h3>Showoff Menu</h3>
    <div id="navToggle" class="buttonWrapper"><i class=" fa fa-bookmark"></i> Table of Contents</div>
    <div id="navigation" class="submenu"></div>
    
    <hr>

    

    

    <div id="closeMenu" class="buttonWrapper"><i class="fa fa-close"></i> Close</div>
    <hr>

    <small>
        <p>Press <code>?</code> for help.</p>
        <p>All features are anonymous.</p>
    </small>
    </div>
    <div id="sidebarExit"></div>
</div>
<div id="help-modal" title="Help">
  <div id="help">
    <div>
      <span class="description">Move to the next slide.</span>
      <span class="action">NEXT</span>
      <span class="hotkeys"><span class="key">space</span><span class="key">down</span><span class="key">right</span><span class="key">pagedown</span></span>
    </div>
    <div>
      <span class="description">Move to the previous slide.</span>
      <span class="action">PREV</span>
      <span class="hotkeys"><span class="key">up</span><span class="key">left</span><span class="key">pageup</span></span>
    </div>
    <div>
      <span class="description">Move to the next section.</span>
      <span class="action">NEXTSEC</span>
      <span class="hotkeys"><span class="key">SPACE</span><span class="key">DOWN</span><span class="key">RIGHT</span><span class="key">PAGEDOWN</span></span>
    </div>
    <div>
      <span class="description">Move to the previous section.</span>
      <span class="action">PREVSEC</span>
      <span class="hotkeys"><span class="key">UP</span><span class="key">LEFT</span><span class="key">PAGEUP</span></span>
    </div>
    <div>
      <span class="description">Show the table of contents menu.</span>
      <span class="action">CONTENTS</span>
      <span class="hotkeys"><span class="key">c</span><span class="key">t</span></span>
    </div>
    <div>
      <span class="description">Toggle follow mode.</span>
      <span class="action">FOLLOW</span>
      <span class="hotkeys"><span class="key">f</span></span>
    </div>
    <div>
      <span class="description">Show this help dialog.</span>
      <span class="action">HELP</span>
      <span class="hotkeys"><span class="key">h</span><span class="key">/</span><span class="key">?</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Refresh slide content.</span>
      <span class="action">REFRESH</span>
      <span class="hotkeys"><span class="key">r</span></span>
    </div>
    <div>
      <span class="description">Completely reload Showoff.</span>
      <span class="action">RELOAD</span>
      <span class="hotkeys"><span class="key">R</span></span>
    </div>
    <div>
      <span class="description">Blank the screen.</span>
      <span class="action">BLANK</span>
      <span class="hotkeys"><span class="key">b</span><span class="key">.</span></span>
    </div>
    <div>
      <span class="description">Toggle the display footer.</span>
      <span class="action">FOOTER</span>
      <span class="hotkeys"><span class="key">F</span></span>
    </div>
    <div>
      <span class="description">Toggle notes display.</span>
      <span class="action">NOTES</span>
      <span class="hotkeys"><span class="key">n</span></span>
    </div>
    <div>
      <span class="description">Clear code execution results.</span>
      <span class="action">CLEAR</span>
      <span class="hotkeys"><span class="key">esc</span></span>
    </div>
    <div>
      <span class="description">Pause the presentation.</span>
      <span class="action">PAUSE</span>
      <span class="hotkeys"><span class="key">p</span></span>
    </div>
    <div>
      <span class="description">Display slideshow of <tt>preshow</tt> images on a timer.</span>
      <span class="action">PRESHOW</span>
      <span class="hotkeys"><span class="key">P</span></span>
    </div>
    <div>
      <span class="description">Execute the first visible code block.</span>
      <span class="action">EXECUTE</span>
      <span class="hotkeys"><span class="key">x</span><span class="key">f5</span></span>
    </div>

    <hr />

    <div>
      <span class="description">Show debugging information.</span>
      <span class="action">DEBUG</span>
      <span class="hotkeys"><span class="key">d</span></span>
    </div>
  </div>
</div>

<div id="preso"><center>loading presentation...</center></div>
<a id="synchronize"><i class="fa fa-link" aria-hidden="true" href="#"></i> Sync Presentation</a>
<div id="notes"></div>

<footer id="footer">
  <span id="followLabel" class="container">Follow Mode: <i id="followMode" class="fa fa-ban" aria-hidden="true"></i></span>
  <span id="slideInfo" class="container"></span>
  <span id="debugInfo" class="container"></span>
  <span id="notesInfo" class="container"></span>
  <span id="slideFilename" class="container"></span>
  <img id="disconnected" src=".//css/disconnected.png" />
</footer>

<div id="slides" class="offscreen" style="display:none;">
<div data-section="introduction" data-title="00_section" id="introduction_00_section" style="background-image: url('file/_images/backgrounds/black_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="introduction/00_section">
<p><br>
<br>
<br></p>

<p class="blockwhite">So what is this Istio thing anyway</p>

<p class="blockteal">JJ Asghar</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="introduction" data-title="01_microservices" id="introduction_01_microservices" style="background-image: url('file/_images/backgrounds/black_bg.png');" class="slide" data-transition="none">
<div class="content " ref="introduction/01_microservices">


<p><img src="./file//_images/kubernetes_logo.png" alt=""></p>
</div>
<div class="notes-section notes"><p>
You probably know this symbol. I'm assuming you do.
If you've used it, you probably notice that there are
missing portions of the ecosystem.
</p></div>
<canvas class="annotations"></canvas>
</div>
<div data-section="introduction" data-title="02_networking" id="introduction_02_networking" class="slide bullets incremental" data-transition="none">
<div class="content bullets incremental" ref="introduction/02_networking">


<h1>Networking is still hard</h1>

<ul>
<li>Yes. You know it is.</li>
<li>Request Routing</li>
<li>Load Balancing</li>
<li>Authentication</li>
<li>Failure Management</li>
<li>Fault Injection</li>
<li>Circuit Breaking</li>
</ul>
</div>
<div class="notes-section notes">
<p>
Networking is still hard.</p>

<p>Now imagine trying to do the following with kubernetes.</p>

<p>This is where Istio comes in.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="introduction" data-title="03_istio" id="introduction_03_istio" style="background-image: url('file/_images/backgrounds/white_bg.png');" class="slide" data-transition="none">
<div class="content " ref="introduction/03_istio">


<p class="huge"><span class="teal">Istio</span></p>

<p><img src="./file//_images/istio_400x400.jpg" alt=""></p>

<p class="huge">It’s the Greek word for ‘<span class="teal">sail</span>’.</p>
</div>
<div class="notes-section notes"><p>
Bring up the k8s cluster you've already built after talking about Istio.
This is where Istio comes into play. It full fills the list of
  - Request Routing
  - Load Balancing
  - Authentication
  - Failure Management
  - Fault Injection
  - Circut Breaking
And I hope to show a few off to you today.
</p></div>
<canvas class="annotations"></canvas>
</div>
<div data-section="bookinfo" data-title="01_deploy_istio" id="bookinfo_01_deploy_istio" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="bookinfo/01_deploy_istio">


<h1>Deploy Istio</h1>

<pre class="highlight"><code class="language-bash">    curl -L https://git.io/getLatestIstio | sh -
    cd istio-1.0.5
    export PATH=$PWD/bin:$PATH
    kubectl apply -f install/kubernetes/helm/helm-service-account.yaml
    helm init --service-account tiller
    helm install install/kubernetes/helm/istio --name istio --namespace istio-system</code></pre>

<h1>Note: Istio installation</h1>

<p><a href="https://github.com/istio/istio/releases" target="_blank">https://github.com/istio/istio/releases</a></p>

<ul>
<li>I suggest you use the <code>Stable</code> release until you are comfortable with the software.</li>
</ul>
</div>
<div class="notes-section notes">
<p>
First thing first. We need to actually deploy Istio. I'm going to run this in another window, but in essence its the following.</p>

<p>I should mention this assumes you have Isito already installed on your local machine.</p>

<p>VERIFY installation.</p>

<p>kubectl get pods &amp;&amp; kubctl get svc &amp;&amp; kubectl get ingress
istio puts everything in it's own namespace....
kubectl get svc -n istio-system
kubectl get pods -n istio-system</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="bookinfo" data-title="02_bookinfo" id="bookinfo_02_bookinfo" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="bookinfo/02_bookinfo">


<h1>Bookinfo</h1>

<p class="huge">I'm going to use a demo app from the official Istio website.</p>

<p><a href="https://istio.io/docs/examples/bookinfo/" target="_blank">https://istio.io/docs/examples/bookinfo/</a></p>
</div>
<div class="notes-section notes">
<p>
I'm going to use a demo app from the official Istio website.</p>

<p>As I was learning Istio, it had the most concise explaination of what was going on for me
and I hope it does the same for you.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="bookinfo" data-title="03_bookinfo_architecture" id="bookinfo_03_bookinfo_architecture" style="background-image: url('file/_images/backgrounds/white_bg.png');" class="slide" data-transition="none">
<div class="content " ref="bookinfo/03_bookinfo_architecture">


<p><img src="./file//_images/bookinfo_arch.png" alt=""></p>
</div>
<div class="notes-section notes">
<p>
Here is the architecture of the app we are going to deploy.</p>

<p>As you can see there is a Python frontend, Java and Ruby middleware, with a nodejs backend.</p>

<p>If this isn't a modern microservices application i don't know what is.</p>

<p>I'd like to have yall focus on the "Reviews" section here, there are three different versions,
one without stars v1, one with black stars, v2 and finally one with red stars v3.</p>

<p>These are the services we are going to manipulatiate.</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="bookinfo" data-title="04_bookinfo_installation" id="bookinfo_04_bookinfo_installation" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="bookinfo/04_bookinfo_installation">


<h1>Deploy Bookinfo app</h1>

<pre class="highlight"><code class="language-bash">    kubectl apply -f &lt;(istioctl \
      kube-inject -f \
      samples/bookinfo/platform/kube/bookinfo.yaml)</code></pre>
</div>
<div class="notes-section notes">
<p>
The following command is what i'm going to run to install bookinfo.</p>

<p>VERIFY</p>

<p>kubectl get services &amp;&amp; kubectl get pods</p>

<p>As you con see here we now have services and pods running bookinfo. including our v1,v2,v3</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="bookinfo" data-title="05_bookinfo_installation" id="bookinfo_05_bookinfo_installation" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="bookinfo/05_bookinfo_installation">


<h1>Deploy Bookinfo app</h1>

<pre class="highlight"><code class="language-bash">     kubectl apply -f \
       samples/bookinfo/networking/bookinfo-gateway.yaml
     kubectl apply -f \
       samples/bookinfo/networking/destination-rule-all.yaml</code></pre>
</div>
<div class="notes-section notes">
<p>
Now that we have it installed, we need to create an ingress gateway assuming
it hasn't and also put in a default routing role.</p>

<p>VERIFY</p>

<p>kubectl get gateway</p>

<p>export INGRESS_HOST=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
export INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="http2")].port}')
export SECURE_INGRESS_PORT=$(kubectl -n istio-system get service istio-ingressgateway -o jsonpath='{.spec.ports[?(@.name=="https")].port}')
export GATEWAY_URL=$INGRESS_HOST:$INGRESS_PORT</p>

<p>firefox $GATEWAY_URL/productpage</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="intelligent_routing" data-title="01_title" id="intelligent_routing_01_title" class="slide center subsection" data-transition="none">
<div class="content center subsection" ref="intelligent_routing/01_title">
<h1>Intelligent Routing</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="intelligent_routing" data-title="02_traffic_v1" id="intelligent_routing_02_traffic_v1" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="intelligent_routing/02_traffic_v1">


<h1>All traffic to v1</h1>

<pre class="highlight"><code class="language-bash">    kubectl apply -f \
      samples/bookinfo/networking/virtual-service-all-v1.yaml
    kubectl get virtualservices -o yaml
    kubectl get destinationrules -o yaml</code></pre>
</div>
<div class="notes-section notes">
<p>
Lets start with the obivious advantage of Istio. Routing to the correct application.</p>

<p>If I refresh the site, you'll see that it's round robining between the three versions.</p>

<p>This is obviously bad. And the first thing we'll do is fix that.</p>

<p>OPEN samples/bookinfo/networking/virtual-service-all-v1.yaml</p>

<p>kubectl get virtualservices -o yaml
kubectl get destinationrules -o yaml
</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="intelligent_routing" data-title="03_traffic_v2" id="intelligent_routing_03_traffic_v2" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="intelligent_routing/03_traffic_v2">


<h1>Some traffic to v2</h1>

<pre class="highlight"><code class="language-bash">    kubctl apply -f \
      samples/bookinfo/networking/virtual-service-reviews-test-v2.yaml</code></pre>
</div>
<div class="notes-section notes">
<p>
Now I'm going to now cut the traffic for a user named "Jason."</p>

<p>Imagine the ability to put out a pre-release version of your microservice and
only have one user use it. It's all done via HTTP headers and in this case we
have the following</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="intelligent_routing" data-title="04_traffic_yaml" id="intelligent_routing_04_traffic_yaml" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="intelligent_routing/04_traffic_yaml">


<h1>Routing only for Jason</h1>

<pre class="highlight"><code class="language-yaml">      http:
      - match:
        - headers:
            end-user:
                exact: jason</code></pre>
</div>
<div class="notes-section notes">
<p>
As you can see here, the yaml section is very straight forward.</p>

<p>I'll bring it up in my editor too here so you can see it in context
</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="service_graph" data-title="01_title" id="service_graph_01_title" class="slide center subsection" data-transition="none">
<div class="content center subsection" ref="service_graph/01_title">
<h1>Service Graph</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="service_graph" data-title="02_service_graph" id="service_graph_02_service_graph" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="service_graph/02_service_graph">


<h1>Service Graph</h1>

<pre class="highlight"><code class="language-bash">    kubectl -n istio-system get svc servicegraph
    kubectl -n istio-system port-forward \
      $(kubectl -n istio-system get pod -l \
      app=servicegraph -o jsonpath='{.items[0].metadata.name}') \
      8088:8088</code></pre>
</div>
<div class="notes-section notes">
<p>
Ok, so we can now make sure that specific things go to specific places, but
what about our app, we think we know what it looks like, but we should verfiy right?
Luckly Istio has a built in Service graph system:</p>

<p>This can be extremely useful for more advanced setups. Visualizing how everything
comes together.</p>

<p>VERIFY</p>

<p>firefox <a href="http://localhost:8088/force/forcegraph.html" target="_blank">http://localhost:8088/force/forcegraph.html</a>
</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="service_graph" data-title="03_service_graph_image" id="service_graph_03_service_graph_image" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="service_graph/03_service_graph_image">


<p><img src="./file//_images/service_graph_arch.png" alt=""></p>
</div>
<div class="notes-section notes">
<p>
There are two links you can try</p>

<p><a href="http://localhost:8088/force/forcegraph.html" target="_blank">http://localhost:8088/force/forcegraph.html</a> will give you a moveable graph</p>

<p>and</p>

<p><a href="http://localhost:8088/dotviz" target="_blank">http://localhost:8088/dotviz</a> will give you the following graph</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="distributed_tracing" data-title="01_title" id="distributed_tracing_01_title" class="slide center subsection" data-transition="none">
<div class="content center subsection" ref="distributed_tracing/01_title">
<h1>Distributed Tracing</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="distributed_tracing" data-title="02_distributed_tracing" id="distributed_tracing_02_distributed_tracing" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="distributed_tracing/02_distributed_tracing">


<h1>Distributed Tracing</h1>

<pre class="highlight"><code class="language-bash">    kubectl port-forward -n istio-system \
      $(kubectl get pod -n istio-system -l \
      app=jaeger -o \
      jsonpath='{.items[0].metadata.name}') \
      16686:16686</code></pre>
</div>
<div class="notes-section notes">
<p>
So we know how to move traffic around, and how things look, but what about issues through the stack?
This is where tracing comes into play.</p>

<p>VERIFY</p>

<p>firefox <a href="http://localhost:16686" target="_blank">http://localhost:16686</a>
</p>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="distributed_tracing" data-title="03_why_distributed_tracing" id="distributed_tracing_03_why_distributed_tracing" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="distributed_tracing/03_why_distributed_tracing">


<p class="huge"><a href="https://ibm.biz/istio-tracing" target="_blank">https://ibm.biz/istio-tracing</a></p>

<p>It'll explain it better then I could ever. ;)</p>
</div>
<div class="notes-section notes">
<p>
As you can see there is a tone of information in Jaeger.</p>

<p>If any of this tickles your fancy, head to the following link</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="fault_injection" data-title="01_title" id="fault_injection_01_title" class="slide center subsection" data-transition="none">
<div class="content center subsection" ref="fault_injection/01_title">
<h1>Fault Injection</h1>
</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="fault_injection" data-title="02_fault_injection" id="fault_injection_02_fault_injection" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="fault_injection/02_fault_injection">


<h1>Fault Injection</h1>

<h2>Create the Delay</h2>

<pre class="highlight"><code class="language-bash">    kubectl apply -f \
      samples/bookinfo/networking/virtual-service-all-v1.yaml
    kubectl apply -f \
      samples/bookinfo/networking/virtual-service-reviews-test-v2.yaml
    kubectl apply -f \
      samples/bookinfo/networking/virtual-service-ratings-test-delay.yaml</code></pre>

<h2>Start up jaeger</h2>

<pre class="highlight"><code class="language-bash">    kubectl port-forward -n istio-system \
      $(kubectl get pod -n istio-system -l \
      app=jaeger -o jsonpath='{.items[0].metadata.name}') \
      16686:16686
    firefox http://localhost:1668</code></pre>
</div>
<div class="notes-section notes">
<p>
So now we can see the health of our app, manipulatiate the traffic, lets cause some problems.</p>

<p>Lets force some failures and look at jaeger to see the errors.</p>

<p>VERIFY</p>

<p>firefox $GATEWAY_URL/productpage  # login as jason</p>

<p>As you can see we are erroring!
You’ve found a bug. There are hard-coded timeouts in the microservices that have caused the
reviews service to fail.
The timeout between the productpage and the reviews service is 6 seconds - coded as 3s + 1
retry for 6s total. The timeout between the reviews and ratings service is hard-coded at
10 seconds. Because of the delay we introduced, the /productpage times out prematurely and
throws the error.
Bugs like this can occur in typical enterprise applications where different teams develop
different microservices independently. Istio’s fault injection rules help you identify
such anomalies without impacting end users.</p>

<p>DON'T FORGET TO LOG OUT HERE</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="fault_injection" data-title="03_fix_fault" id="fault_injection_03_fix_fault" style="background-image: url('file/_images/backgrounds/white_bg_cloud.png');" class="slide" data-transition="none">
<div class="content " ref="fault_injection/03_fix_fault">


<h1>Fault Injection</h1>

<h2>Set traffic to 50/50</h2>

<pre class="highlight"><code class="language-bash">    kubectl apply -f \
      samples/bookinfo/networking/virtual-service-reviews-50-v3.yaml</code></pre>

<h2>Send all the traffic to v3</h2>

<pre class="highlight"><code class="language-bash">    kubectl apply -f \
     samples/bookinfo/networking/virtual-service-reviews-v3.yaml
    kubectl get virtualservice reviews -o yaml</code></pre>
</div>
<div class="notes-section notes">
<p>
Lets fix this by moving all the traffic to version 3 which we know works</p>

<p>First we'll move it 50/50 to verify that we aren't crazy</p>

<p>Ok, good that's looking better</p>

</div>
<canvas class="annotations"></canvas>
</div>
<div data-section="conclusion" data-title="99_endslide" id="conclusion_99_endslide" style="background-image: url('file/_images/backgrounds/white_bg.png');" class="slide" data-transition="none">
<div class="content " ref="conclusion/99_endslide">
<p class="blockteal">Thank you!</p>

<p class="huge">JJ Asghar</p>

<p class="blockteal">twitter: @jjasghar</p>

<p class="blockteal">email: <a href="mailto:jja@ibm.com" target="_blank">jja@ibm.com</a></p>

<p class="blockteal">slides: <a href="http://jjasghar.github.io/istio-overview" target="_blank">http://jjasghar.github.io/istio-overview</a></p>
</div>
<canvas class="annotations"></canvas>
</div>
</div>
<div id="buttonNav">
  <div id="buttonPrev"><i class="fa fa-chevron-left fa-lg"></i> Previous</div><div id="buttonNext">Next <i class="fa fa-chevron-right fa-lg"></i></div>
</div>
<div id="pauseScreen">
  PAUSED
</div>

  <script defer type="text/javascript">
    // We want the audience members to see automatic tours. We can assume that they won't be
    // using many server domains like the presenter might.
    var autoTour = true;

    $( document ).ready(function() {
      if(presenter && !window.opener) {
        alert('This is an audience view designed for interactivity. If you are placing this window on a projector, you should use the Display View instead.');
      }

      tours['showoff:activity'] = [
        {
          element: ".currentSlide .activityToggle",
          intro: I18n.t('tour.activity.complete')
        }
      ];

      tours['showoff:form'] = [
        {
          element: ".currentSlide input.save",
          intro: I18n.t('tour.form.save')
        }
      ];

      tours['showoff:menu'] = [
        {
          element: "#hamburger",
          intro: I18n.t('tour.menu.start')
        },
        {
          element: "#navToggle",
          intro: I18n.t('tour.menu.navigation')
        },
        {
          element: "#fileDownloads",
          intro: I18n.t('tour.menu.download')
        },
        {
          element: "#paceFaster",
          intro: I18n.t('tour.menu.pace')
        },
        {
          element: "#questionToggle",
          intro: I18n.t('tour.menu.questions')
        },
        {
          element: "#feedbackToggle",
          intro: I18n.t('tour.menu.feedback')
        }
      ].filter(function(item) { return (document.querySelector(item['element'])) });
      // display tips for only the enabled features
    });
  </script>

</body>
</html>
